<!doctype html>
<html lang="zxx">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Watch shop | eCommers</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {{!-- <link rel="shortcut icon" type="image/x-icon" href="public/assets_user/img/favicon.ico"> --}}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!-- CSS here -->
    <link rel="stylesheet" href="/assets_user/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets_user/css/owl.carousel.min.css">
    <link rel="stylesheet" href="/assets_user/css/flaticon.css">
    <link rel="stylesheet" href="/assets_user/css/slicknav.css">
    <link rel="stylesheet" href="/assets_user/css/animate.min.css">
    <link rel="stylesheet" href="/assets_user/css/magnific-popup.css">
    <link rel="stylesheet" href="/assets_user/css/fontawesome-all.min.css">
    <link rel="stylesheet" href="/assets_user/css/themify-icons.css">
    <link rel="stylesheet" href="/assets_user/css/slick.css">
    <link rel="stylesheet" href="/assets_user/css/nice-select.css">
    <link rel="stylesheet" href="/assets_user/css/style.css">
</head>

<body>


    {{> user_Header}}
    <main>
        <!-- Hero Area Start-->
        <div class="slider-area ">
            <div class="single-slider slider-height2 d-flex align-items-center">
                <div class="container">
                    <div class="row">
                        <div class="col-xl-12">
                            <div class="hero-cap text-center">
                                <h2>Checkout</h2>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Hero Area End-->
        <!-- Latest Products Start -->
        <section class="popular-items latest-padding">
            <div class="container">


                
                {{!-- <form action="/orderplaced" method="post" class="needs-validation" novalidate>
                    <div>
                        <div class="form-group row">
                            <input class="form-control" name="firstname" type="text" placeholder="Full name"
                                value="{{userAdd.fullname}}" readonly>
                        </div>
                        <div class="form-group row">
                            <input class="form-control" name="email" type="text" placeholder="Full name"
                                value="{{userAdd.email}}" readonly>
                        </div>
                        <div class="form-group row">
                            <input class="form-control" name="phone" type="number" placeholder="Phone"
                                value="{{userAdd.phonenumber}}" readonly>
                        </div>
                        <div class="form-group row">
                            <input class="form-control" name="address" type="text" placeholder="Address" readonly
                                value="{{userAdd.address.housename}} {{userAdd.address.city}} {{userAdd.address.district}} {{userAdd.address.pincode}}  {{userAdd.address.state}}  {{userAdd.address.country}}">
                            <input type="hidden" name="housename" value="{{userAdd.address.housename}}">
                            <input type="hidden" name="city" value="{{userAdd.address.city}}">
                            <input type="hidden" name="state" value="{{userAdd.address.state}}">
                            <input type="hidden" name="pincode" value="{{userAdd.address.pincode}}">
                            <input type="hidden" name="country" value="{{userAdd.address.country}}">
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">Continue</button>
                             
                </form> --}}




                {{!-- code for Cards
                -----------------------------------------------------------------------------------------------------------------------------
                --}}



<div class="container-fluid">
        <div class="container py-5">
            <div class="row g-4">
                <div class="col-lg-12">
                    <div class="row g-4">
                        <h1 class="mb-4">Billing details</h1>
                        {{#each userAdd}}
                        <div class="col-md-6 col-lg-4 col-xl-3 mx-3">
                            {{!-- copy --}}
                            <div class="col-md-12 ">
                                <div class="form-check">
                                    <input class="form-check-input" name="addressCheck" type="radio" value=""
                                        id="defaultCheck1" onchange="fetchAddress('{{this._id}}')" <label
                                        class="form-check-label" for="defaultCheck1">
                                    {{!-- copy --}}
                                    <div class="card" style="width: 18rem;">
                                        <div class="card-header">
                                            Address
                                        </div>
                                        <ul class="list-group list-group-flush">
                                            <li class="list-group-item">{{this.fullname}}</li>
                                            <li class="list-group-item">{{this.address.housename}}</li>
                                            <li class="list-group-item">{{this.address.city}}</li>
                                            <li class="list-group-item">{{this.address.state}}</li>
                                            <li class="list-group-item">{{this.address.pincode}}</li>
                                            <li class="list-group-item">{{this.address.country}}</li>
                                        </ul>
                                    </div>

                                    </label>
                                </div>
                            </div>
                            {{!-- copy --}}
                        </div>
                        {{/each}}

                    </div>
                </div>
            </div>
        </div>
    </div>




                {{!-- code for Add Address --}}


                <br>
                <br>
                <br>
                <br>
                <br>

                <form action="/orderplaced" method="post">
                    <h3>ADD ADDRESS</h3>
                    <!-- Full Name -->
                    <div class="form-group">
                        <label for="fullname">Full Name:</label>
                        <input type="text" class="form-control" id="fullname" name="fullname" required>
                    </div>

                    {{!-- <!-- Email -->
                    <div class="form-group">
                        <label for="email">Email:</label>
                        <input type="email" class="form-control" id="email" value="{{emailname}}" name="email" readonly>
                    </div> --}}

                    <!-- Country -->

                    <div class="form-group">
                        <label for="phonenumber">Country:</label>
                        <input type="tel" class="form-control" id="country" name="country" required>
                    </div>

                    <!-- Phone Number -->
                    <div class="form-group">
                        <label for="phonenumber">Phone Number:</label>
                        <input type="tel" class="form-control" id="phonenumber" name="phone" required>
                    </div>

                    <!-- Pincode -->
                    <div class="form-group">
                        <label for="pincode">Pincode:</label>
                        <input type="Number" class="form-control" id="pincode" name="pincode" required>
                    </div>

                    <!-- State -->
                    <div class="form-group">
                        <label for="state">State:</label>
                        <input type="text" class="form-control" id="state" name="state" required>
                    </div>
                    <!-- District -->
                    <div class="form-group">
                        <label for="district">District:</label>
                        <input type="text" class="form-control" id="district" name="district" required>
                    </div>

                    <!-- City -->
                    <div class="form-group">
                        <label for="city">City:</label>
                        <input type="text" class="form-control" id="city" name="city" required>
                    </div>

                    <!-- House Name -->
                    <div class="form-group">
                        <label for="housename">House Name:</label>
                        <input type="text" class="form-control" id="housename" name="housename" required>
                    </div>

                    {{!-- save address button --}}
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="newaddress" id="flexRadioDefault1">
                        <label class="form-check-label" for="flexRadioDefault1">
                            Default radio
                        </label>
                    </div>




                    <!-- Add Address Button -->

                    <button type="submit" class="btn btn-primary">Add Address</button>

                </form>


            </div>
        </section>
        <!-- Latest Products End -->
        <!--? Shop Method Start-->
        <div class="shop-method-area">
            <div class="container">
                <div class="method-wrapper">
                    <div class="row d-flex justify-content-between">
                        <div class="col-xl-4 col-lg-4 col-md-6">
                            <div class="single-method mb-40">
                                <i class="ti-package"></i>
                                <h6>Free Shipping Method</h6>
                                <p>aorem ixpsacdolor sit ameasecur adipisicing elitsf edasd.</p>
                            </div>
                        </div>
                        <div class="col-xl-4 col-lg-4 col-md-6">
                            <div class="single-method mb-40">
                                <i class="ti-unlock"></i>
                                <h6>Secure Payment System</h6>
                                <p>aorem ixpsacdolor sit ameasecur adipisicing elitsf edasd.</p>
                            </div>
                        </div>
                        <div class="col-xl-4 col-lg-4 col-md-6">
                            <div class="single-method mb-40">
                                <i class="ti-reload"></i>
                                <h6>Secure Payment System</h6>
                                <p>aorem ixpsacdolor sit ameasecur adipisicing elitsf edasd.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Shop Method End-->
    </main>
    {{> user_Footer}}
    <!--? Search model Begin -->
    <div class="search-model-box">
        <div class="h-100 d-flex align-items-center justify-content-center">
            <div class="search-close-btn">+</div>
            <form class="search-model-form">
                <input type="text" id="search-input" placeholder="Searching key.....">
            </form>
        </div>
    </div>
    <!-- Search model end -->

    <!-- JS here -->

    <script src="./assets_user/js/vendor/modernizr-3.5.0.min.js"></script>
    <!-- Jquery, Popper, Bootstrap -->




 <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script>
         // Use fetch to update the quantity in the database
       function fetchAddress(Id) {
      fetch('/fetch-address', {
         method: 'POST',
         headers: {
            'Content-Type': 'application/json',
         },
         body: JSON.stringify({
            addressId: Id,
           
         }),
      })
        .then(response => {
         if (!response.ok) {
            throw new Error('Network response was not ok');
         }
         return response.json();
      })
      .then(data => {
        console.log(data) 
         // console.log(data.fullname)
         // Update the quantity on the page after successful update
         
         
         document.getElementById("fullname").value = data.fullname;
        document.getElementById("phonenumber").value = data.phonenumber;
        
        // console.log(data.address.country)
       document.getElementById("country").value = data.country 
        document.getElementById("state").value = data.state;
       document.getElementById("district").value = data.district;
       document.getElementById("city").value= data.city;
       document.getElementById("housename").value = data.housename;
        document.getElementById("state").value = data.state;
         document.getElementById("pincode").value = data.pincode;
       console.log(data) 
      })    
      .catch(error => {
         console.error('Error updating quantity:', error);
      });
    
       }
        
    </script>










    <script src="./assets_user/js/vendor/jquery-1.12.4.min.js"></script>
    <script src="./assets_user/js/popper.min.js"></script>
    <script src="./assets_user/js/bootstrap.min.js"></script>
    <!-- Jquery Mobile Menu -->
    <script src="./assets_user/js/jquery.slicknav.min.js"></script>

    <!-- Jquery Slick , Owl-Carousel Plugins -->
    <script src="./assets_user/js/owl.carousel.min.js"></script>
    <script src="./assets_user/js/slick.min.js"></script>

    <!-- One Page, Animated-HeadLin -->
    <script src="./assets_user/js/wow.min.js"></script>
    <script src="./assets_user/js/animated.headline.js"></script>

    <!-- Scroll up, nice-select, sticky -->
    <script src="./public/assets_user/js/jquery.scrollUp.min.js"></script>
    <script src="./public/assets_user/js/jquery.nice-select.min.js"></script>
    <script src="./public/assets_user/js/jquery.sticky.js"></script>
    <script src="./public/assets_user/js/jquery.magnific-popup.js"></script>

    <!-- contact js -->
    <script src="./public/assets_user/js/contact.js"></script>
    <script src="./public/assets_user/js/jquery.form.js"></script>
    <script src="./public/assets_user/js/jquery.validate.min.js"></script>
    <script src="./public/assets_user/js/mail-script.js"></script>
    <script src="./public/assets_user/js/jquery.ajaxchimp.min.js"></script>

    <!-- Jquery Plugins, main Jquery -->
    <script src="./public/assets_user/js/plugins.js"></script>
    <script src="./public/assets_user/js/main.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>







        

</body>

</html>